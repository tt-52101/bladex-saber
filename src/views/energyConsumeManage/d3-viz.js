/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/wnm-d3-viz@1.0.0/d3-viz.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function (t, n) { if ("object" == typeof module && module.exports) { var e = require("d3"); module.exports = n(e) } else t.viz = n(t.d3) }(this, (function (t) { var n = { version: "1.1.8" }, e = 2 * Math.PI, r = Math.PI, a = Math.PI / 2; function i(t) { return t[0] } function o(t) { return t[1] } function u(t) { return t.height } function c(t) { return t.width } function s(t) { return t.height / 2 } function l(t) { return t.width / 2 } function d(t) { return t.key } function f(t) { return t.value } function h(t) { var n; return function (e) { return arguments.length ? (n = e, t) : n } } function g(t, n) { var e; return function (r) { return arguments.length ? (e = r, t) : void 0 !== e ? e : n } } function p(n, e, r, a, i, o) { if (i <= 0 || a <= 0) return 0; var u = n.concat().sort(t.ascending), c = a - u.length * e + (o ? e : 0), s = [], l = 0, d = 0; return t.range(u.length).forEach((function (t) { d = (c - r * t) / (i -= u[t - 1] || 0), l += u[t] * d <= r ? 1 : 0, s.push(d) })), s[l] } function y(n, e, r, a, i) { var o = a, u = t.sum(n), c = p(n, e, r, i - a, u, !1); return n.map((function (t) { var n = c * t, a = (n < r ? r : n) / 2; return { c: (o += 2 * a + e) - a, v: n, w: a, value: t, percent: t / (u || 1) } })) } function v(t) { function n(t, n) { return [t * Math.cos(n), t * Math.sin(n)] } var e = n(t[0], t[2]), a = n(t[0], t[3]), i = n(t[1], t[2]), o = n(t[1], t[3]); return ["M", e, "A", t[0], t[0], "0", t[3] - t[2] > r ? 1 : 0, "1", a, "L", o, "A", t[1], t[1], "0", t[3] - t[2] > r ? 1 : 0, "0", i, "z"].join(" ") } function m(t, n, a, i, o, u) { var c = h(t, n), s = h(t, a), l = h(i, o), d = h(i, u); return "M" + c + f(t, s, a - n) + (n == o && a == u ? g(c, n, a, i) : g(l, a, o, i) + f(i, d, u - o) + g(c, n, u, t)) + "Z"; function f(t, n, e) { return "A" + t + "," + t + " 0 " + +(e > r) + ",1 " + n } function h(t, n) { return [t * Math.cos(n), t * Math.sin(n)] } function g(t, n, a, i) { var o = (a += a < n ? e : 0) - n, u = 1 - (o > r ? e - o : o) / r; u = Math.pow(u, 5); var c = (a + n) / 2 - (a - n > r ? r : 0); return "Q" + u * i * Math.cos(c) + "," + u * i * Math.sin(c) + " " + t } } function x(t, n) { for (var e = [], r = n; r > n - t; r--)e.push(r < 0 ? r + t : r); return e } return n.bP = function () { var n, e, r, a, i, o, u, c, s, l, d, f, h, g, p, y, v; function m(n) { f = n, n.each((function () { var n = t.select(this), e = m.bars(), r = n.selectAll(".subBars").data(e.subBars).enter().append("g").attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).attr("class", "subBars").append("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b); void 0 !== d && r.style("fill", (function (t) { return d(t) })); var a = n.selectAll(".edges").data(e.edges).enter().append("path").attr("class", "edges").attr("d", (function (t) { return t.path })).style("fill-opacity", m.edgeOpacity()); void 0 !== d && a.style("fill", (function (t) { return d(t) })), n.selectAll(".mainBars").data(e.mainBars).enter().append("g").attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).attr("class", "mainBars").append("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b).style("fill-opacity", 0).on("mouseover", m.mouseover).on("mouseout", m.mouseout) })) } function x(t) { return -t.width } function A(t) { return -t.height } function k(t) { return 2 * t.width } function b(t) { return 2 * t.height } return m.data = function (t) { return arguments.length ? (l = t, m) : l }, m.fill = function (t) { return arguments.length ? (d = t, m) : d }, m.keyPrimary = function (t) { return arguments.length ? (n = t, m) : void 0 !== n ? n : function (t) { return t[0] } }, m.sortPrimary = function (n) { return arguments.length ? (p = n, m) : void 0 !== p ? p : t.ascending }, m.keySecondary = function (t) { return arguments.length ? (e = t, m) : void 0 !== e ? e : function (t) { return t[1] } }, m.sortSecondary = function (n) { return arguments.length ? (y = n, m) : void 0 !== y ? y : t.ascending }, m.value = function (t) { return arguments.length ? (r = t, m) : void 0 !== r ? r : function (t) { return t[2] } }, m.width = function (t) { return arguments.length ? (a = t, m) : void 0 !== a ? a : 400 }, m.height = function (t) { return arguments.length ? (i = t, m) : void 0 !== i ? i : 600 }, m.barSize = function (t) { return arguments.length ? (u = t, m) : void 0 !== u ? u : 35 }, m.min = function (t) { return arguments.length ? (c = t, m) : void 0 !== c ? c : 0 }, m.orient = function (t) { return arguments.length ? (o = t, m) : void 0 !== o ? o : "vertical" }, m.pad = function (t) { return arguments.length ? (s = t, m) : void 0 !== s ? s : 0 }, m.duration = function (t) { return arguments.length ? (g = t, m) : void 0 !== g ? g : 500 }, m.edgeOpacity = function (t) { return arguments.length ? (h = t, m) : void 0 !== h ? h : .4 }, m.edgeMode = function (t) { return arguments.length ? (v = t, m) : void 0 !== v ? v : "curved" }, m.bars = function (n) { var e, r = { primary: [], secondary: [] }, a = { primary: [], secondary: [] }, i = { primary: m.keyPrimary(), secondary: m.keySecondary() }, o = m.orient(); return c("primary"), c("secondary"), s("primary"), s("secondary"), e = m.min() / 2, r.primary.forEach((function (t) { t.height < e && (t.height = e) })), r.secondary.forEach((function (t) { t.height < e && (t.height = e) })), { mainBars: r.primary.concat(r.secondary), subBars: a.primary.concat(a.secondary), edges: function () { var n = t.map(a.secondary, (function (t) { return t.index })), e = m.edgeMode(); return a.primary.map((function (t) { var e = n.get(t.index); return { path: "vertical" === o ? r(t.x + t.width, t.y + t.height, e.x - e.width, e.y + e.height, e.x - e.width, e.y - e.height, t.x + t.width, t.y - t.height) : i(t.x - t.width, t.y + t.height, e.x - e.width, e.y - e.height, e.x + e.width, e.y - e.height, t.x + t.width, t.y + t.height), primary: t.primary, secondary: t.secondary, value: t.value, percent: t.percent } })); function r(t, n, r, a, i, o, u, c) { if ("straight" == e) return ["M", t, ",", n, "L", r, ",", a, "L", i, ",", o, "L", u, ",", c, "z"].join(""); var s = (t + r) / 2, l = (i + u) / 2; return ["M", t, ",", n, "C", s, ",", n, " ", s, ",", a, ",", r, ",", a, "L", i, ",", o, "C", l, ",", o, " ", l, ",", c, ",", u, ",", c, "z"].join("") } function i(t, n, r, a, i, o, u, c) { if ("straight" == e) return ["M", t, ",", n, "L", r, ",", a, "L", i, ",", o, "L", u, ",", c, "z"].join(""); var s = (n + a) / 2, l = (o + c) / 2; return ["M", t, ",", n, "C", t, ",", s, " ", r, ",", s, ",", r, ",", a, "L", i, ",", o, "C", i, ",", l, " ", u, ",", l, ",", u, ",", c, "z"].join("") } }() }; function u(t, e) { return void 0 === n || n.part === e || i[n.part](t) === n.key } function c(n) { function e(t) { return u(t, n) ? m.value()(t) : 0 } var a = t.nest().key("primary" == n ? m.keyPrimary() : m.keySecondary()).sortKeys("primary" == n ? m.sortPrimary() : m.sortSecondary()).rollup((function (n) { return t.sum(n, e) })).entries(m.data()), i = l(a, m.pad(), m.min(), 0, "vertical" == o ? m.height() : m.width()), c = m.barSize(); a.forEach((function (t, e) { r[n].push({ x: "horizontal" == o ? (i[e].s + i[e].e) / 2 : "primary" == n ? c / 2 : m.width() - c / 2, y: "vertical" == o ? (i[e].s + i[e].e) / 2 : "primary" == n ? c / 2 : m.height() - c / 2, height: "vertical" == o ? (i[e].e - i[e].s) / 2 : c / 2, width: "horizontal" == o ? (i[e].e - i[e].s) / 2 : c / 2, part: n, key: t.key, value: t.value, percent: i[e].p }) })) } function s(n) { function e(t) { return u(t, n) ? m.value()(t) : 0 } var i = t.map(r[n], (function (t) { return t.key })); t.nest().key("primary" == n ? m.keyPrimary() : m.keySecondary()).sortKeys("primary" == n ? m.sortPrimary() : m.sortSecondary()).key("secondary" == n ? m.keyPrimary() : m.keySecondary()).sortKeys("secondary" == n ? m.sortPrimary() : m.sortSecondary()).rollup((function (n) { return t.sum(n, e) })).entries(m.data()).forEach((function (t) { var e = i.get(t.key), r = l(t.values, 0, 0, "vertical" == o ? e.y - e.height : e.x - e.width, "vertical" == o ? e.y + e.height : e.x + e.width), u = m.barSize(); t.values.forEach((function (i, c) { a[n].push({ x: "vertical" == o ? "primary" == n ? u / 2 : m.width() - u / 2 : (r[c].s + r[c].e) / 2, y: "horizontal" == o ? "primary" == n ? u / 2 : m.height() - u / 2 : (r[c].s + r[c].e) / 2, height: ("vertical" == o ? r[c].e - r[c].s : u) / 2, width: ("horizontal" == o ? r[c].e - r[c].s : u) / 2, part: n, primary: "primary" == n ? t.key : i.key, secondary: "primary" == n ? i.key : t.key, value: i.value, percent: r[c].p * e.percent, index: "primary" == n ? t.key + "|" + i.key : i.key + "|" + t.key }) })) })) } function l(n, e, r, a, i) { var o = r / (i - a - 2 * n.length * e), u = 0, c = 0, s = t.sum(n, (function (t) { return t.value })); n.forEach((function (t) { t.value < o * s && (u += 1, c += t.value) })); var l = s < 1e-5 ? 0 : (i - a - 2 * n.length * e - u * r) / (s - c), d = a, f = []; return n.forEach((function (t) { var n = t.value * l; f.push({ s: d + e + (n < r ? .5 * (r - n) : 0), e: d + e + (n < r ? .5 * (r + n) : n), p: s < 1e-5 ? 0 : t.value / s }), d += 2 * e + (n < r ? r : n) })), f } }, m.update = function (t) { l = t; var n = m.bars(), e = m.duration(); f.selectAll(".subBars").data(n.subBars).transition().duration(e).attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).select("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b), f.selectAll(".edges").data(n.edges).transition().duration(e).attr("d", (function (t) { return t.path })).style("fill-opacity", m.edgeOpacity()), f.selectAll(".mainBars").data(n.mainBars).transition().duration(e).attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).select("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b).style("fill-opacity", 0) }, m.mouseover = function (t) { var n = m.bars(t); f.selectAll(".mainBars").filter((function (n) { return n.part === t.part && n.key === t.key })).select("rect").style("stroke-opacity", 1), f.selectAll(".subBars").data(n.subBars).transition().duration(m.duration()).attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).select("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b); var e = f.selectAll(".edges").data(n.edges); e.filter((function (n) { return n[t.part] === t.key })).transition().duration(m.duration()).style("fill-opacity", m.edgeOpacity()).attr("d", (function (t) { return t.path })), e.filter((function (n) { return n[t.part] !== t.key })).transition().duration(m.duration()).style("fill-opacity", 0).attr("d", (function (t) { return t.path })), f.selectAll(".mainBars").data(n.mainBars).transition().duration(m.duration()).attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).select("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b) }, m.mouseout = function (t) { var n = m.bars(); f.selectAll(".mainBars").filter((function (n) { return n.part === t.part && n.key === t.key })).select("rect").style("stroke-opacity", 0), f.selectAll(".subBars").data(n.subBars).transition().duration(m.duration()).attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).select("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b), f.selectAll(".edges").data(n.edges).transition().duration(m.duration()).style("fill-opacity", m.edgeOpacity()).attr("d", (function (t) { return t.path })), f.selectAll(".mainBars").data(n.mainBars).transition().duration(m.duration()).attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })).select("rect").attr("x", x).attr("y", A).attr("width", k).attr("height", b) }, m }, n.gg = function () { var e, a, i, o, u, c, s, l, d, f, h, g, p, y, v, m, x, A, k, b = { innerRadius: 20, outerRadius: 150, angleOffset: .7, startAngle: -1.5 * r, endAngle: .5 * r, minorTickStart: .9, minorTickEnd: .95, majorTickStart: .82, majorTickEnd: .95, needleColor: "#de2c2c", innerFaceColor: "#999999", faceColor: "#666666", domain: [0, 100], duration: 500, ease: "cubicInOut", ticks: t.range(0, 101, 2), majorTicks: function (t) { return t % 10 == 0 }, labelLocation: .7 }; function w(n) { h = n, n.each((function () { var n = t.select(this), e = w.scale(), a = w.minorTickStart(), i = w.minorTickEnd(), o = w.majorTickStart(), u = w.majorTickEnd(), c = w.ticks(), s = w.majorTicks(), l = w.labelLocation(), d = w.outerRadius(); n.append("circle").attr("r", d).style("fill", "url(#vizgg3" + g + ")").attr("class", "face"), n.append("circle").attr("r", w.innerRadius()).style("fill", "url(#vizgg2" + g + ")").style("filter", "url(#vizgg5" + g + ")").attr("class", "innerFace"), n.append("g").selectAll("line").data(c).enter().append("line").attr("class", (function (t) { return s(t) ? "majorTicks" : "minorTicks" })).attr("x1", (function (t) { return d * (s(t) ? o : a) * Math.cos(e(t)) })).attr("y1", (function (t) { return d * (s(t) ? o : a) * Math.sin(e(t)) })).attr("x2", (function (t) { return d * (s(t) ? u : i) * Math.cos(e(t)) })).attr("y2", (function (t) { return d * (s(t) ? u : i) * Math.sin(e(t)) })), n.selectAll("text").data(c.filter(s)).enter().append("text").attr("class", "label").attr("x", (function (t) { return d * l * Math.cos(e(t)) })).attr("y", (function (t) { return d * l * Math.sin(e(t)) })).attr("dy", 3).text((function (t) { return t })); var f = w.outerRadius() / b.outerRadius, h = 180 * w.scale()(w.value()) / r + 90; n.append("g").attr("transform", "translate(1,1)").selectAll(".needleshadow").data([0]).enter().append("g").attr("transform", "rotate(" + h + ")").attr("class", "needleshadow").append("path").attr("d", ["m 0", -130 * f, 5 * f, 175 * f, -10 * f, "0,z"].join(",")).style("filter", "url(#vizgg6" + g + ")"), n.selectAll(".needle").data([0]).enter().append("g").attr("transform", "rotate(" + h + ")").attr("class", "needle").append("polygon").attr("points", [-.5 * f, -130 * f, .5 * f, -130 * f, 5 * f, 45 * f, -5 * f, 45 * f].join(",")).style("fill", "url(#vizgg4" + g + ")") })) } return w.scale = function () { return t.scale.linear().domain(w.domain()).range([b.startAngle + w.angleOffset(), b.endAngle - w.angleOffset()]) }, w.innerRadius = function (t) { return arguments.length ? (e = t, w) : void 0 !== e ? e : b.innerRadius }, w.outerRadius = function (t) { return arguments.length ? (a = t, w) : void 0 !== a ? a : b.outerRadius }, w.angleOffset = function (t) { return arguments.length ? (l = t, w) : void 0 !== l ? l : b.angleOffset }, w.labelLocation = function (t) { return arguments.length ? (k = t, w) : void 0 !== k ? k : b.labelLocation }, w.ticks = function (t) { return arguments.length ? (p = t, w) : void 0 !== p ? p : b.ticks }, w.majorTicks = function (t) { return arguments.length ? (y = t, w) : void 0 !== y ? y : b.majorTicks }, w.minorTickStart = function (t) { return arguments.length ? (v = t, w) : void 0 !== v ? v : b.minorTickStart }, w.minorTickEnd = function (t) { return arguments.length ? (m = t, w) : void 0 !== m ? m : b.minorTickEnd }, w.majorTickStart = function (t) { return arguments.length ? (x = t, w) : void 0 !== x ? x : b.majorTickStart }, w.majorTickEnd = function (t) { return arguments.length ? (A = t, w) : void 0 !== A ? A : b.majorTickEnd }, w.needleColor = function (t) { return arguments.length ? (i = t, w) : void 0 !== i ? i : b.needleColor }, w.innerFaceColor = function (t) { return arguments.length ? (o = t, w) : void 0 !== o ? o : b.innerFaceColor }, w.faceColor = function (t) { return arguments.length ? (u = t, w) : void 0 !== u ? u : b.faceColor }, w.domain = function (t) { return arguments.length ? (c = t, w) : void 0 !== c ? c : b.domain }, w.duration = function (t) { return arguments.length ? (d = t, w) : void 0 !== d ? d : b.duration }, w.ease = function (t) { return arguments.length ? (f = t, w) : void 0 !== f ? f : b.ease }, w.value = function (t) { return arguments.length ? (s = t, w) : void 0 !== s ? s : .5 * (b.domain[0] + b.domain[1]) }, w.defs = function (e, r) { var a = e.append("defs"); g = r; var i = w.needleColor(), o = w.innerFaceColor(), u = w.faceColor(), c = n.defs(a).lG().id("vizgg1" + r).sel(); n.defs(c).stop().offset("0").stopColor(i), n.defs(c).stop().offset("1").stopColor(t.rgb(i).darker(1)); var s = n.defs(a).rG().id("vizgg2" + r).fx("35%").fy("65%").r("65%").spreadMethod("pad").sel(); n.defs(s).stop().offset("0").stopColor(o), n.defs(s).stop().offset("1").stopColor(t.rgb(o).darker(2)); var l = n.defs(a).rG().id("vizgg3" + r).fx("35%").fy("65%").r("65%").spreadMethod("pad").sel(); n.defs(l).stop().offset("0").stopColor(u), n.defs(l).stop().offset("1").stopColor(t.rgb(u).darker(2)), n.defs(a).lG().id("vizgg4" + r).gradientUnits("userSpaceOnUse").y1("80").x1("-10").y2("80").x2("10").xlink("#vizgg1" + r); var d = n.defs(a).filter().id("vizgg5" + r).sel(); n.defs(d).feFlood().result("flood").floodColor("rgb(0,0,0)").floodOpacity("0.6"), n.defs(d).feComposite().result("composite1").operator("in").in2("SourceGraphic").in("flood"), n.defs(d).feGaussianBlur().result("blur").stdDeviation("2").in("composite1"), n.defs(d).feOffset().result("offset").dy("2").dx("2"), n.defs(d).feComposite().result("composite2").operator("over").in2("offset").in("SourceGraphic"); var f = n.defs(a).filter().x("-0.3").y("-0.3").height("1.8").width("1.8").id("vizgg6" + r).sel(); n.defs(f).feGaussianBlur().stdDeviation("2") }, w.setNeedle = function (n) { var e = 180 * w.scale()(n) / r + 90, a = 180 * w.scale()(w.value()) / r + 90, i = w.ease(); function o(n, e) { return t.interpolateString("rotate(" + n + ")", "rotate(" + e + ")") } h.selectAll(".needle").data([n]).transition().duration(w.duration()).attrTween("transform", (function (t) { return o(a, e) })).ease(i), h.selectAll(".needleshadow").data([n]).transition().duration(w.duration()).attrTween("transform", (function (t) { return o(a, e) })).ease(i).each("end", (function () { this.angle = n })), w.value(n) }, w }, n.ch = function () { var n, r, i, o, u, c, s, l, d, f, h = function (t) { return t[0] }, g = function (t) { return t[1] }, A = function (t) { return t[2] }, k = function (t) { return t.source + " (" + t.value + ")" }, b = t.ascending, w = .03, M = 0, S = 180, E = 200, B = .7, P = .02, C = 500, T = !0; function z(r) { function o(t) { return v([S, E, t.startAngle, t.endAngle]) } function u(t) { return m(S, t.startAngle, t.endAngle, S, t.endStartAngle, t.endEndAngle) } n = r, l || L(), r.each((function () { var n = t.select(this), r = n.selectAll(".groups").data(s).enter().append("g").attr("class", "groups").on("mouseover", z.mouseover).on("mouseout", z.mouseout), c = r.append("text").attr("class", "label"), d = (1 + z.labelPadding()) * z.outerRadius(), f = z.label(); c.filter((function (t) { return "g" == t.type })).attr("x", (function (t) { return d * Math.cos(j(t)) })).attr("y", (function (t) { return d * Math.sin(j(t)) })).text(f).style("text-anchor", (function (t) { var n = j(t); return n < a || n > e - a ? "start" : "end" })).each((function (t) { this._current = t })), r.append("path").style("fill", (function (t) { return i(t.source) })).style("stroke", (function (t) { return i(t.source) })).attr("d", o).each((function (t) { this._current = t })).filter((function (t) { return "g" == t.type })), n.append("g").attr("class", "chords").selectAll(".chord").data(l).enter().append("g").attr("class", "chord").append("path").each((function (t) { this._current = t })).attr("d", u).style("fill", (function (t) { return i(t.target) })).style("opacity", z.chordOpacity()).style("stroke", (function (t) { return i(t.target) })).style("display", (function (t) { return t.display ? "inline" : "none" })) })) } function O(r) { var i = n.selectAll(".groups").data(r ? d : z.groups()), o = (1 + z.labelPadding()) * z.outerRadius(), u = z.label(); i.select("path").transition().duration(C).attrTween("d", (function (n) { var e = t.interpolate(this._current, n); return this._current = e(0), function (t) { return n = e(t), v([S, E, n.startAngle, n.endAngle]); var n } })), i.select(".label").filter((function (t) { return "g" == t.type })).transition().duration(C).attrTween("x", (function (n) { var e = t.interpolate(this._current, n); return this._current = e(0), function (t) { return o * Math.cos(j(e(t))) } })).attrTween("y", (function (n) { var e = t.interpolate(this._current, n); return this._current = e(0), function (t) { return o * Math.sin(j(e(t))) } })).text(u).style("text-anchor", (function (t) { var n = j(t); return n < a || n > e - a ? "start" : "end" })); var c = z.chordOpacity(); n.select(".chords").selectAll(".chord").data(r ? f : z.chords()).select("path").transition().duration(C).attrTween("d", (function (n) { var e = t.interpolate(this._current, n); return this._current = e(0), function (t) { return n = e(t), m(S, n.startAngle, n.endAngle, S, n.endStartAngle, n.endEndAngle); var n } })).style("opacity", (function (t) { return t.display ? c : 0 })) } function j(t) { return function (t) { for (; t > e;)t -= e; for (; t < 0;)t += e; return t }((t.startAngle + t.endAngle) / 2) } function L() { o = [], r.forEach((function (t) { -1 == o.indexOf(h(t)) && o.push(h(t)), -1 == o.indexOf(g(t)) && o.push(g(t)) })), o = o.sort(b), u = {}, c = {}, o.forEach((function (t) { u[t] = {}, c[t] = {}, o.forEach((function (n) { u[t][n] = 0, c[t][n] = !1 })) })), r.forEach((function (t) { var n = h(t), e = g(t); u[n][e] += A(t), c[n][e] = !0 })), s = [], o.forEach((function (n, e) { s.push({ source: n, type: "gs", value: 0, skipPad: !0, index: e }), s.push({ source: n, type: "g", value: t.sum(o, (function (t) { return u[n][t] })), skipPad: !1, index: e }) })), G(s, w, 0, void 0, M), l = [], s.filter((function (t) { return "g" == t.type })).forEach((function (t, n) { var e = x(o.length, n), r = y(e.map((function (n) { return u[t.source][o[n]] })), 0, 0, t.startAngle, t.endAngle); e.forEach((function (e, a) { var i = r[a]; l.push({ startAngle: i.c - i.v / 2, endAngle: i.c + i.v / 2, value: i.value, source: t.source, target: o[e], type: "c", display: c[t.source][o[e]], index: n, subindex: e, indexsubindex: n + "-" + e }) })) })); var n = t.map(l, (function (t) { return t.indexsubindex })); l.forEach((function (t) { if (t.subindex == t.index) return t.endStartAngle = t.startAngle, void (t.endEndAngle = t.startAngle); var e = n.get(t.subindex + "-" + t.index); t.endStartAngle = e.startAngle, t.endEndAngle = e.startAngle })), T = !1 } function G(n, e, r, a, i) { var o = void 0 !== a, u = 0; if (o) { for (var c = !1; u < n.length; u++)if (n[u].source == a && "g" == n[u].type) { c = !0; break } c || console.log("The fixed source '" + a + "' is not a valid key") } var s = t.range(n.length); o && (s = s.slice(u).concat(s.slice(0, u))); var l = n.filter((function (t) { return !(o && t.source === a && "g" == t.type || t.skipPad) })).map((function (t) { return t.value })), d = 2 * Math.PI - (o ? n[u].endAngle - n[u].startAngle + 2 * e : 0), f = o ? n[u].endAngle + e : i, h = t.sum(l), g = p(l, e, r, d <= 0 ? 0 : d, h, !!o); s.slice(o ? 1 : 0).forEach((function (t) { var a = g * n[t].value, i = (a < r ? r - a : 0) / 2; n[t].startAngle = f, n[t].endAngle = f + a, n[t].padAngle = i, n[t].percent = n[t].value / (h || 1), f += a + i + (n[t].skipPad ? 0 : e) })) } return z.data = function (t) { return arguments.length ? (r = t, T = !0, z) : r }, z.fill = function (t) { return arguments.length ? (i = t, z) : i }, z.duration = function (t) { return arguments.length ? (C = t, z) : C }, z.chordOpacity = function (t) { return arguments.length ? (B = t, z) : B }, z.innerRadius = function (t) { return arguments.length ? (S = t, T = !0, z) : S }, z.outerRadius = function (t) { return arguments.length ? (E = t, T = !0, z) : E }, z.source = function (t) { return arguments.length ? (h = t, T = !0, z) : h }, z.target = function (t) { return arguments.length ? (g = t, T = !0, z) : g }, z.value = function (t) { return arguments.length ? (A = t, T = !0, z) : A }, z.padding = function (t) { return arguments.length ? (w = t, T = !0, z) : w }, z.labelPadding = function (t) { return arguments.length ? (P = t, z) : P }, z.sort = function (t) { return arguments.length ? (b = t, T = !0, z) : b }, z.startAngle = function (t) { return arguments.length ? (M = t, T = !0, z) : M }, z.chords = function () { return T && L(), l }, z.groups = function () { return T && L(), s }, z.label = function (t) { return arguments.length ? (k = t, z) : k }, z.mouseover = function (n) { !function (n) { var r = s.filter((function (t) { return t.source == n && "g" == t.type }))[0]; function a(t) { return t.endAngle + t.startAngle } d = [], o.forEach((function (t, e) { d.push({ source: t, startAngle: r.startAngle, endAngle: r.endAngle, padAngle: r.padAngle, percent: r.percent, type: "gs", value: t == n ? u[t][t] : 0, skipPad: t != n || !c[t][t], index: e }), t == n ? d.push({ source: t, startAngle: r.startAngle, endAngle: r.endAngle, padAngle: r.padAngle, percent: r.percent, type: "g", value: r.value, skipPad: !1, index: e }) : d.push({ source: t, type: "g", value: u[n][t], skipPad: !1, index: e }) })), G(d, w, 0, n, M); var i = a(r); s.forEach((function (t, n) { var r = d[n], o = a(t) < i; r.startAngle -= o ? e : 0, r.endAngle -= o ? e : 0 })), f = [], d.filter((function (t) { return "g" == t.type })).forEach((function (t, e) { var r = x(o.length, e), a = y(r.map((function (e) { var r = o[e]; return t.source == n ? u[t.source][r] : r == n ? u[r][t.source] : 0 })), 0, 0, t.startAngle, t.endAngle); r.forEach((function (r, i) { var u = a[i]; f.push({ startAngle: u.c - u.v / 2, endAngle: u.c + u.v / 2, value: u.value, source: t.source, target: o[r], type: "c", display: t.source === n, index: e, subindex: r, indexsubindex: e + "-" + r }) })) })); var l = t.map(f.map((function (t) { return { startAngle: t.startAngle, endAngle: t.endAngle, indexsubindex: t.indexsubindex } })), (function (t) { return t.indexsubindex })), h = t.map(d.filter((function (t) { return "gs" == t.type })), (function (t) { return t.source })); f.forEach((function (t) { if (t.subindex == t.index) { var e = h.get(t.source); return t.endStartAngle = e.startAngle, void (t.endEndAngle = e.endAngle) } var r = l.get(t.subindex + "-" + t.index); t.endStartAngle = r.startAngle, t.endEndAngle = r.endAngle, t.source !== n && (t.startAngle = t.endAngle, t.endEndAngle = t.endStartAngle) })) }(n.source), O(1) }, z.mouseout = function (t) { O(0) }, z }, n.defs = function (t) { var n = {}, e = t; return n.sel = function () { return e }, n.lG = function () { return e = e.append("linearGradient"), n }, n.rG = function () { return e = e.append("radialGradient"), n }, n.stop = function () { return e = e.append("stop"), n }, n.filter = function () { return e = e.append("filter"), n }, n.feFlood = function () { return e = e.append("feFlood"), n }, n.feComposite = function () { return e = e.append("feComposite"), n }, n.feOffset = function () { return e = e.append("feOffset"), n }, n.feGaussianBlur = function () { return e = e.append("feGaussianBlur"), n }, n.result = function (t) { return e = e.attr("result", t), n }, n.floodColor = function (t) { return e = e.attr("flood-color", t), n }, n.floodOpacity = function (t) { return e = e.attr("flood-opacity", t), n }, n.stdDeviation = function (t) { return e = e.attr("stdDeviation", t), n }, n.operator = function (t) { return e = e.attr("operator", t), n }, n.height = function (t) { return e = e.attr("height", t), n }, n.width = function (t) { return e = e.attr("width", t), n }, n.in = function (t) { return e = e.attr("in", t), n }, n.in2 = function (t) { return e = e.attr("in2", t), n }, n.id = function (t) { return e = e.attr("id", t), n }, n.fx = function (t) { return e = e.attr("fx", t), n }, n.fy = function (t) { return e = e.attr("fy", t), n }, n.dx = function (t) { return e = e.attr("dx", t), n }, n.dy = function (t) { return e = e.attr("dy", t), n }, n.x1 = function (t) { return e = e.attr("x1", t), n }, n.y1 = function (t) { return e = e.attr("y1", t), n }, n.x2 = function (t) { return e = e.attr("x2", t), n }, n.y2 = function (t) { return e = e.attr("y2", t), n }, n.x = function (t) { return e = e.attr("x", t), n }, n.y = function (t) { return e = e.attr("y", t), n }, n.r = function (t) { return e = e.attr("r", t), n }, n.spreadMethod = function (t) { return e = e.attr("spreadMethod", t), n }, n.gradientUnits = function (t) { return e = e.attr("gradientUnits", t), n }, n.xlink = function (t) { return e = e.attr("xlink:href", t), n }, n.offset = function (t) { return e = e.attr("offset", t), n }, n.stopColor = function (t) { return e = e.attr("stop-color", t), n }, n.path = function () { return e = e.append("path"), n }, n.d = function (t) { return e = e.attr("d", t), n }, n }, n.bar = function () { function n(e) { this.g = e, e.each((function () { var e = t.select(this), r = n.bars(), a = n.dock(), i = "t" == a || "b" == a, o = e.selectAll(".primarybars").data(r).enter().append("g").attr("class", "primaryBars").attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })), f = o.selectAll(".secondaryBars").data((function (t) { return t.values })).enter().append("g").attr("class", "secondaryBars").attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })), h = n.fill(), g = f.append("rect").attr("width", c).attr("height", u), p = n.paddingLabel(); void 0 !== h && g.style("fill", h), o.append("text").attr("class", "primaryvalue").attr("x", (function (t) { return t.wf * t.width })).attr("y", (function (t) { return t.hf * t.height })).attr("dx", (function (t) { return 2 * p * (t.wf - .5) })).attr("dy", (function (t) { return i ? t.hf ? 3 * p : -p : p })).style("text-anchor", (function (t) { return i ? "middle" : t.wf ? "start" : "end" })).text(n.valuePrimary()), o.append("text").attr("class", "primarykey").attr("x", (function (t) { return (1 - t.wf) * t.width })).attr("y", (function (t) { return (1 - t.hf) * t.height })).attr("dx", (function (t) { return i ? 0 : t.wf ? -p : p })).attr("dy", (function (t) { return i ? t.hf ? -p : 3 * p : p })).style("text-anchor", (function (t) { return i ? "middle" : t.wf ? "end" : "start" })).text(d), f.append("text").attr("class", "secondaryvalue").attr("x", l).attr("y", s).attr("dy", p).text(n.valueSecondary()).style("text-anchor", "middle") })) } function e() { var e = void 0 === n.keySecondary(), r = t.nest().key(n.keyPrimary()).sortKeys(n.sortPrimary()); e || (r = r.key(n.keySecondary()).sortKeys(n.sortSecondary())); var a = n.value(); return r = r.rollup((function (n) { return t.sum(n, a) })).entries(n.data()), e && r.forEach((function (t) { t.values = [{ value: t.value }], delete t.value })), r } return n.data = h(n), n.width = g(n, 400), n.height = g(n, 400), n.dock = g(n, "b"), n.fill = g(n, void 0), n.paddingInner = g(n, .1), n.paddingOuter = g(n, .1), n.paddingLabel = g(n, 6), n.value = g(n, o), n.keyPrimary = g(n, i), n.keySecondary = g(n, void 0), n.sortPrimary = g(n, t.ascending), n.sortSecondary = g(n, t.ascending), n.valuePrimary = g(n, f), n.valueSecondary = g(n, f), n.valueDomain = g(n, void 0), n.primaryKeys = function () { return t.set(this.data, n.keyPrimary()).values().sort(n.sortPrimary()) }, n.keyScale = function () { var e = n.dock(), r = { l: n.height(), r: n.height(), t: n.width(), b: n.width() }; return t.scaleBand().domain(n.primaryKeys()).range([0, r[e]]).paddingInner(n.paddingInner()).paddingOuter(n.paddingOuter()) }, n.valueScale = function () { var r = n.dock(), a = "b" == r, i = "l" == r, o = "r" == r, u = n.height(), c = n.width(), s = i ? [0, c] : o ? [c, 0] : a ? [u, 0] : [0, u], l = n.valueDomain(); if (null == l) { var d = e(), h = t.min(d, (function (n) { return t.sum(n.values, f) })), g = t.max(d, (function (n) { return t.sum(n.values, f) })); l = [Math.min(0, h), g] } return t.scaleLinear().domain(l).range(s) }, n.bars = function () { n.data(); var r = n.height(), a = n.width(), i = n.dock(), o = "b" == i, u = "l" == i, c = "r" == i, s = "t" == i || "b" == i, l = e(), d = n.keyScale(), h = n.valueDomain(), g = u ? [0, a] : c ? [a, 0] : o ? [r, 0] : [0, r]; if (null == h) { var p = t.min(l, (function (n) { return t.sum(n.values, f) })), y = t.max(l, (function (n) { return t.sum(n.values, f) })); h = [Math.min(0, p), y] } var v = t.scaleLinear().domain(h).range(g), m = d.bandwidth(), x = v(0); return l.forEach((function (n) { n.value = t.sum(n.values, f); var e = v(n.value), r = Math.abs(e - x), a = Math.min(x, e); n.width = s ? m : r, n.height = s ? r : m, n.x = s ? d(n.key) : a, n.y = s ? a : d(n.key), n.wf = s ? .5 : u ? n.value < 0 ? 0 : 1 : n.value < 0 ? 1 : 0, n.hf = s ? o ? n.value < 0 ? 1 : 0 : n.value < 0 ? 0 : 1 : .5; var i = 0; n.values.forEach((function (t) { t.primaryKey = n.key, t.secondaryKey = t.key, delete t.key; var e = v(i), r = v(i += t.value), a = Math.abs(r - e), o = Math.min(e, r); t.width = s ? m : a, t.height = s ? a : m, t.x = s ? 0 : o - n.x, t.y = s ? o - n.y : 0 })) })), l }, n }, n.lg = function () { function n(e) { this.g = e, e.each((function () { var e = t.select(this), r = n.rows(), a = n.data(); r = null == r ? a.length : Math.min(r, a.length); var i = Math.ceil(a.length / r), o = t.scaleBand().domain(t.range(r)).range([0, n.height()]).paddingInner(n.paddingInner()), u = t.scaleBand().domain(t.range(i)).range([0, n.width()]), c = n.size(), s = o.bandwidth(), l = (u.bandwidth(), n.paddingLabel()), d = t.range(a.length).map((function (t) { var n = t % i, e = (t - n) / i; return { x: u(n), y: o(e), width: c, height: s, key: a[t] } })), f = e.selectAll(".legendg").data(d, (function (t) { return t.key })).enter().append("g").attr("class", "legendg").attr("transform", (function (t) { return "translate(" + t.x + "," + t.y + ")" })); f.append("text").attr("x", (function (t) { return c + l })).attr("y", (function (t) { return t.height / 2 })).attr("dy", 6).text((function (t) { return t.key })), f.each(n.draw()); var h = n.fill(); void 0 !== h && f.selectAll(".legend-icon").style("fill", h) })) } return n.data = h(n), n.rows = g(n, void 0), n.width = g(n, 100), n.height = g(n, 200), n.paddingInner = g(n, .1), n.paddingLabel = g(n, 6), n.size = g(n, 12), n.fill = g(n, void 0), n.rect = function (n) { t.select(this).append("rect").attr("class", "legend-icon").attr("height", u).attr("width", c) }, n.circle = function (n) { t.select(this).append("circle").attr("class", "legend-icon").attr("r", Math.min(n.height, n.width)).attr("cx", l).attr("cy", s) }, n.draw = g(n, n.rect), n }, n }));
 //# sourceMappingURL=/sm/e56f33e11c9c0c38ee57517d9edc89cc35a9b7f4415837d6081337a9646f4f89.map